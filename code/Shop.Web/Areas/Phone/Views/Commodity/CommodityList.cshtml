@using Shop.Model

@{
    ViewBag.Title = ViewBag.SearchTitle ?? "药品列表";
    Layout = "~/Areas/Phone/Views/Shared/_Layout.cshtml";
}

<header class="tc header">
    
    @{
        if (ViewBag.Tag != null)
        {
            var tag = ViewBag.Tag as Tag;
            <a href='@Url.RouteUrl("Phone_yaodian")' class="goback"></a>
            <h2>@tag.Tag_Name</h2>
        }
        else
        {
             <a href='@Url.RouteUrl("Phone_yaoSearch")' class="goback"></a>
            <h2>搜索结果</h2>
        }
    }

</header>
<div class="main pro">
    <div class="order dis-flex tc">
        <a href="javascript:" class="on up"><span>价格</span><i class="fa fa-long-arrow-down"></i></a>
        <a href="javascript:"><span>折扣</span><i class="fa fa-long-arrow-down"></i></a>
        <a href="javascript:"><span>销量</span><i class="fa fa-long-arrow-down"></i></a>
    </div>
    <div class="rows">
        <dl class="pro-wrapper clearfix commodity-list">
            
        </dl>
    </div>
</div>
<input id="tag-id" type="hidden" value="@ViewBag.TagId" />
<input id="search-key" type="hidden" value="@ViewBag.Search" />
@section Js
    {
    <script type="text/javascript">
        var para = {};
        para.pageNum = 1, para.numPerPage = 20, para.sortName = '', para.sortOrder = '', para.search = '';
        var loadCommodityList = function (para) {
            $.ajax({
                url: "/Phone/Commodity/CommodityItemList",
                data: para,
                success: function (data) {
                    $('.commodity-list').html(data).show(500);
                }
            });
        }

        var defaultTagId = $('#tag-id').val();
        var searchKey = $('#search-key').val().trim();
        para.tagId = defaultTagId;
        para.search = searchKey;
        $(function () {
            loadCommodityList(para);
        });
    </script>
}