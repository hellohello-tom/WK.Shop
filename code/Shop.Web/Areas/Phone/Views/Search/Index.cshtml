@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Phone/Views/Shared/_Layout.cshtml";
    }
<div class="search">
    <form action="" method="POST">
        <div class="main">
            <input class="radius" type="text" name="keyword" id="keywords" placeholder="输入药品名称/疾病名称搜索" autocomplete="off">
            <input type="submit" class="clean radius" value="搜索">
        </div>
    </form>
</div>
<ul class="searchTips"></ul>
<footer class="footer">
    <div class="dis-flex nav tc">
        <a href="javascript:;" class=on><i class="lnr lnr-home"></i>首页</a>
        <a href="javascript:;"><i class="lnr lnr-gift"></i>活动专场</a>
        <a href="javascript:;"><i class="lnr lnr-cart"></i>购物车</a>
        <a href="javascript:;"><i class="lnr lnr-user"></i>个人中心</a>
    </div>
</footer>
@section Js{
    <script type="text/javascript">
        $(function () {

        });

        var searchBox = $("[name=keyword]");
        searchBox.on("click", function () {
            setTimeout(function () {
                showSearchTips();
            }, 300);
        })
        searchBox.on("keyup", function () {
            setTimeout(function () {
                showSearchTips();
            }, 300);
        })

        var curTipsIndex = -1;//当前提示框选中位置
        function showSearchTips() {
            var keyword = $.trim(searchBox.val());
            if (keyword == "") {
                hideSearchTips();
                return;
            }

            $.ajax({
                type: "post",
                url: "/Phone/Search/GetDrugList",
                data: { query: keyword },
                dataType: "json",
                success: function (json) {
                    if (json != 0) {
                        var html = '';
                        $.each(json, function (key, value) {
                            html += "<li data-goodsid='" + key + "'>" + value.keyword + "</li>";
                        });
                        $(".searchTips").empty().html(html);
                        $(".searchTips").show();
                        $(".searchTips li").click(function () {
                            var keyword = $(this).html();
                            hideSearchTips();
                            $("[name=keyword]").val(keyword);
                            location.href = "/Phone/Commodity/CommodityList?search=" + keyword;
                        })
                    } else {
                        hideSearchTips();
                    }
                }
            })
            // $(".searchTips").show();
        }
        function hideSearchTips() {
            $(".searchTips").hide();
            curTipsIndex = -1;//重置
        }
    </script>
}