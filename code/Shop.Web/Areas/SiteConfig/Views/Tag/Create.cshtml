@model Shop.Model.Menu
@using Shop.Common
@{
    ViewBag.Title = "Tag_Create";
}
<script type="text/javascript">
    function SiteConfig_Tag_Create_UploadComplete(event, response, status) {
        if (status) {
            var json = eval("(" + response + ")");
            if (json.status == 1) {
                alertMsg.correct(json.msg);
                $('#Tag_ImagePath').val(json.data.thumbnailFileName);
                $('#imgTag').attr('src', json.data.thumbnailFileName);
            }
            else {
                alertMsg.error(json.msg);
            }
        }
    }
</script>
<h2 class="contentTitle">标签信息</h2>
<div class="pageContent">
    @using (Html.BeginForm("Create", "Tag", FormMethod.Post, new Dictionary<string, object>() { { "class", "" }, { "onsubmit", "return validateCallback(this,navTabAjaxDone);" } }))
    {
        @Html.HiddenFor(x=>x.Id)
        @Html.HiddenFor(x => x.Menu_CreateTime)
        @Html.HiddenFor(x => x.Menu_IsDel)
        @Html.HiddenFor(x => x.Menu_CreateUser)
        @Html.HiddenFor(x => x.Menu_Type)
        @Html.HiddenFor(x => x.Menu_ParentId)
        <div class="pageFormContent" layouth="140">
            <dl>
                <dt>手机导航</dt>
                <dd>
                    @Html.HiddenFor(m => m.Menu_NavigationId, new { dataField = "selectNavigation.Id" })
                    <input type="text" readonly="readonly" class="required" datafield="selectNavigation.NavigationName" value="@ViewBag.NavigationName" />
                    <a href="/SiteConfig/Tag/SelectNavigation" class="btnLook" lookupgroup="selectNavigation">
                        选择评定内容
                    </a>
                    @Html.ValidationMessageFor(m => m.Menu_NavigationId)
                </dd>
            </dl>
            <dl>
                <dt>标签名称</dt>
                <dd>
                    @Html.TextBoxFor(m => m.Menu_Name)
                    @Html.ValidationMessageFor(m => m.Menu_Name)
                </dd>
            </dl>
            <dl>
                <dt>标签图片</dt>
                <dd>
                    @Html.HiddenFor(m => m.Menu_ImgPath, new { @readonly="readonly"})
                    <input id="SiteConfig_Tag_Create_UploadImg" type="file" name="filedata"
                           uploaderoption="{
                           uploader:'/Common/Upload/SingleFile?isReOriginal=1',
                    fileSizeLimit:'@Shop.Web.BaseData.SiteConfig.AttachSize KB',
                    fileTypeExts:'*.png;*.gif;*.jpg',
                    auto:true,
                    multi:false,
                    onUploadSuccess:SiteConfig_Tag_Create_UploadComplete
                           }" />
                    @Html.ValidationMessageFor(m => m.Menu_ImgPath)
                    <img src="@Model.Menu_ImgPath" id="imgTag" style="width:140px;height:140px"/>
                </dd>
            </dl>
            <dl>
                <dt>排序</dt>
                <dd>
                    @Html.TextBoxFor(m => m.Menu_Sort)
                    @Html.ValidationMessageFor(m => m.Menu_Sort)
                </dd>
            </dl>
            <dl>
                <dt>显示状态</dt>
                <dd>
                    <label>@Html.RadioButton("Tag_Status", (int)Status.Show, (int)Status.Show == Model.Menu_Status) 显示</label>
                    <label>@Html.RadioButton("Tag_Status", (int)Status.Hide, (int)Status.Hide == Model.Menu_Status) 隐藏</label>
                    @Html.ValidationMessageFor(m => m.Menu_Status)
                </dd>
            </dl>
        </div>
        <div class="formBar">
            <ul>
                <li><div class="buttonActive"><div class="buttonContent"><button type="submit">保存</button></div></div></li>
                <li><div class="button"><div class="buttonContent"><button type="button" class="close">关闭</button></div></div></li>
            </ul>
        </div>
    }
</div>